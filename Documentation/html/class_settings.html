<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TinyWATCH S3: Settings Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TinyWATCH S3
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_settings.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_settings-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Settings Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;settings.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a06d1d58938c8fdc7a577e52f9ffda29d" id="r_a06d1d58938c8fdc7a577e52f9ffda29d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06d1d58938c8fdc7a577e52f9ffda29d">load</a> ()</td></tr>
<tr class="memdesc:a06d1d58938c8fdc7a577e52f9ffda29d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the user settings from the user flash FS and deserialise them from JSON back into the <a class="el" href="struct_config.html">Config</a> struct.  <br /></td></tr>
<tr class="separator:a06d1d58938c8fdc7a577e52f9ffda29d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00dcb4d9f9a4f7deaee375a545947752" id="r_a00dcb4d9f9a4f7deaee375a545947752"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00dcb4d9f9a4f7deaee375a545947752">save</a> (bool force)</td></tr>
<tr class="memdesc:a00dcb4d9f9a4f7deaee375a545947752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialise the cConfig struct into JSON and save to the user flash FS Only check for save every 5 mins, and then only save if the data has changed.  <br /></td></tr>
<tr class="separator:a00dcb4d9f9a4f7deaee375a545947752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e5b7dd1bc7037dae326078619852a6" id="r_aa4e5b7dd1bc7037dae326078619852a6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4e5b7dd1bc7037dae326078619852a6">backup</a> ()</td></tr>
<tr class="separator:aa4e5b7dd1bc7037dae326078619852a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa65b7c45b1ba3a125a818224094d63d4" id="r_aa65b7c45b1ba3a125a818224094d63d4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa65b7c45b1ba3a125a818224094d63d4">create</a> ()</td></tr>
<tr class="memdesc:aa65b7c45b1ba3a125a818224094d63d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new set of save data, either because this is the very first save, or because the load failed due to FS corruption, or malformed JSON data that could not be deserialised.  <br /></td></tr>
<tr class="separator:aa65b7c45b1ba3a125a818224094d63d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a20fe3938eafa97da459177007ab050" id="r_a1a20fe3938eafa97da459177007ab050"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a20fe3938eafa97da459177007ab050">print_file</a> (void)</td></tr>
<tr class="separator:a1a20fe3938eafa97da459177007ab050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c276563c885a8a30ef340e6e9e6d979" id="r_a3c276563c885a8a30ef340e6e9e6d979"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c276563c885a8a30ef340e6e9e6d979">has_wifi_creds</a> (void)</td></tr>
<tr class="memdesc:a3c276563c885a8a30ef340e6e9e6d979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if there are WiFi credentials stores in the user settings.  <br /></td></tr>
<tr class="separator:a3c276563c885a8a30ef340e6e9e6d979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c5758b55206fe6754ed044a50a41ee" id="r_a53c5758b55206fe6754ed044a50a41ee"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53c5758b55206fe6754ed044a50a41ee">has_country_set</a> (void)</td></tr>
<tr class="separator:a53c5758b55206fe6754ed044a50a41ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe820637e10449ff29f61ab90f59cc2f" id="r_afe820637e10449ff29f61ab90f59cc2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe820637e10449ff29f61ab90f59cc2f">update_wifi_credentials</a> (String ssid, String pass)</td></tr>
<tr class="memdesc:afe820637e10449ff29f61ab90f59cc2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the users WiFi credentials in the settings struct.  <br /></td></tr>
<tr class="separator:afe820637e10449ff29f61ab90f59cc2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed3552ca49c29b917e5826c799b70d7" id="r_a5ed3552ca49c29b917e5826c799b70d7"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5ed3552ca49c29b917e5826c799b70d7">get_load_status</a> ()</td></tr>
<tr class="separator:a5ed3552ca49c29b917e5826c799b70d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00753c3834f8ac98173ed55b06d26477" id="r_a00753c3834f8ac98173ed55b06d26477"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00753c3834f8ac98173ed55b06d26477">get_save_status</a> ()</td></tr>
<tr class="separator:a00753c3834f8ac98173ed55b06d26477"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4ca1d960902db935f5a7ec3db599b53c" id="r_a4ca1d960902db935f5a7ec3db599b53c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_config.html">Config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ca1d960902db935f5a7ec3db599b53c">config</a></td></tr>
<tr class="separator:a4ca1d960902db935f5a7ec3db599b53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a509f772f09ffc6fff7979da55a31a39e" id="r_a509f772f09ffc6fff7979da55a31a39e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a509f772f09ffc6fff7979da55a31a39e">setting_wifi_start</a> {&amp;config.wifi_start}</td></tr>
<tr class="separator:a509f772f09ffc6fff7979da55a31a39e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa42da92c05be487651de3a57ba3a53b0" id="r_aa42da92c05be487651de3a57ba3a53b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa42da92c05be487651de3a57ba3a53b0">setting_time_24hour</a> {&amp;config.time_24hour}</td></tr>
<tr class="separator:aa42da92c05be487651de3a57ba3a53b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8a0fdb8c98a2f7738995106b522f17d" id="r_ab8a0fdb8c98a2f7738995106b522f17d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8a0fdb8c98a2f7738995106b522f17d">setting_time_dateformat</a> {&amp;config.time_dateformat}</td></tr>
<tr class="separator:ab8a0fdb8c98a2f7738995106b522f17d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7292aa2bf29892b83474e794f4d8764" id="r_ae7292aa2bf29892b83474e794f4d8764"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae7292aa2bf29892b83474e794f4d8764">setting_left_handed</a> {&amp;config.left_handed}</td></tr>
<tr class="separator:ae7292aa2bf29892b83474e794f4d8764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1207215c27f2d0beb3b23115e0001463" id="r_a1207215c27f2d0beb3b23115e0001463"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1207215c27f2d0beb3b23115e0001463">setting_flipped</a> {&amp;config.flipped}</td></tr>
<tr class="separator:a1207215c27f2d0beb3b23115e0001463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07f3193633d813269b3495255dc63125" id="r_a07f3193633d813269b3495255dc63125"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a07f3193633d813269b3495255dc63125">setting_audio_ui</a> {&amp;config.audio_ui}</td></tr>
<tr class="separator:a07f3193633d813269b3495255dc63125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b75bfb359b1533477accd5e65601f60" id="r_a7b75bfb359b1533477accd5e65601f60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b75bfb359b1533477accd5e65601f60">setting_audio_alarm</a> {&amp;config.audio_alarm}</td></tr>
<tr class="separator:a7b75bfb359b1533477accd5e65601f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a77482d4930cb4f700856c02ccc528785" id="r_a77482d4930cb4f700856c02ccc528785"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77482d4930cb4f700856c02ccc528785">log_to_nvs</a> (const char *key, const char *<a class="el" href="#a02350e39c1cb382d74b6e2ae869b5e85">log</a>)</td></tr>
<tr class="separator:a77482d4930cb4f700856c02ccc528785"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:afa3dbfe914fdc12c1f6419836b5294d1" id="r_afa3dbfe914fdc12c1f6419836b5294d1"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa3dbfe914fdc12c1f6419836b5294d1">backupNumber</a> (const String)</td></tr>
<tr class="separator:afa3dbfe914fdc12c1f6419836b5294d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae9cfa0afc12575661b57f107fca803e6" id="r_ae9cfa0afc12575661b57f107fca803e6"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae9cfa0afc12575661b57f107fca803e6">max_time_between_saves</a> = 60000</td></tr>
<tr class="separator:ae9cfa0afc12575661b57f107fca803e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a142b93e70d4701aec73d790d0636003c" id="r_a142b93e70d4701aec73d790d0636003c"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a142b93e70d4701aec73d790d0636003c">last_save_time</a> = 0</td></tr>
<tr class="separator:a142b93e70d4701aec73d790d0636003c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1656c5e0b8259976be7cfd2d720459d" id="r_ab1656c5e0b8259976be7cfd2d720459d"><td class="memItemLeft" align="right" valign="top">Preferences&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1656c5e0b8259976be7cfd2d720459d">nvs</a></td></tr>
<tr class="separator:ab1656c5e0b8259976be7cfd2d720459d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:adb8b7aff516eea8ae61ea171321ec857" id="r_adb8b7aff516eea8ae61ea171321ec857"><td class="memItemLeft" align="right" valign="top">static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb8b7aff516eea8ae61ea171321ec857">filename</a> = &quot;/settings.json&quot;</td></tr>
<tr class="separator:adb8b7aff516eea8ae61ea171321ec857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11318b2647ea7d36db2185fc652c2c8a" id="r_a11318b2647ea7d36db2185fc652c2c8a"><td class="memItemLeft" align="right" valign="top">static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11318b2647ea7d36db2185fc652c2c8a">tmp_filename</a> = &quot;/tmp_settings.json&quot;</td></tr>
<tr class="separator:a11318b2647ea7d36db2185fc652c2c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02350e39c1cb382d74b6e2ae869b5e85" id="r_a02350e39c1cb382d74b6e2ae869b5e85"><td class="memItemLeft" align="right" valign="top">static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a02350e39c1cb382d74b6e2ae869b5e85">log</a> = &quot;/log.txt&quot;</td></tr>
<tr class="separator:a02350e39c1cb382d74b6e2ae869b5e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b7deab2e703293098334c3bbc60537e" id="r_a6b7deab2e703293098334c3bbc60537e"><td class="memItemLeft" align="right" valign="top">static constexpr const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b7deab2e703293098334c3bbc60537e">backup_prefix</a> = &quot;settings_back_&quot;</td></tr>
<tr class="separator:a6b7deab2e703293098334c3bbc60537e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af893529f9727266e69ab3dd11de07eed" id="r_af893529f9727266e69ab3dd11de07eed"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af893529f9727266e69ab3dd11de07eed">max_backups</a> = 10</td></tr>
<tr class="separator:af893529f9727266e69ab3dd11de07eed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa4e5b7dd1bc7037dae326078619852a6" name="aa4e5b7dd1bc7037dae326078619852a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4e5b7dd1bc7037dae326078619852a6">&#9670;&#160;</a></span>backup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Settings::backup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afa3dbfe914fdc12c1f6419836b5294d1" name="afa3dbfe914fdc12c1f6419836b5294d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa3dbfe914fdc12c1f6419836b5294d1">&#9670;&#160;</a></span>backupNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long Settings::backupNumber </td>
          <td>(</td>
          <td class="paramtype">const String</td>          <td class="paramname"><span class="paramname"><em>filename</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa65b7c45b1ba3a125a818224094d63d4" name="aa65b7c45b1ba3a125a818224094d63d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa65b7c45b1ba3a125a818224094d63d4">&#9670;&#160;</a></span>create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Settings::create </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new set of save data, either because this is the very first save, or because the load failed due to FS corruption, or malformed JSON data that could not be deserialised. </p>
<p>Once created, the data is automatically saved to flash.</p>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a5ed3552ca49c29b917e5826c799b70d7" name="a5ed3552ca49c29b917e5826c799b70d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ed3552ca49c29b917e5826c799b70d7">&#9670;&#160;</a></span>get_load_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String Settings::get_load_status </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a00753c3834f8ac98173ed55b06d26477" name="a00753c3834f8ac98173ed55b06d26477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00753c3834f8ac98173ed55b06d26477">&#9670;&#160;</a></span>get_save_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String Settings::get_save_status </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a53c5758b55206fe6754ed044a50a41ee" name="a53c5758b55206fe6754ed044a50a41ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53c5758b55206fe6754ed044a50a41ee">&#9670;&#160;</a></span>has_country_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Settings::has_country_set </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3c276563c885a8a30ef340e6e9e6d979" name="a3c276563c885a8a30ef340e6e9e6d979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c276563c885a8a30ef340e6e9e6d979">&#9670;&#160;</a></span>has_wifi_creds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Settings::has_wifi_creds </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if there are WiFi credentials stores in the user settings. </p>
<dl class="section return"><dt>Returns</dt><dd>true credentials are not empty strings </dd>
<dd>
false credentials are empty strings </dd></dl>

</div>
</div>
<a id="a06d1d58938c8fdc7a577e52f9ffda29d" name="a06d1d58938c8fdc7a577e52f9ffda29d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d1d58938c8fdc7a577e52f9ffda29d">&#9670;&#160;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Settings::load </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load the user settings from the user flash FS and deserialise them from JSON back into the <a class="el" href="struct_config.html">Config</a> struct. </p>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="a77482d4930cb4f700856c02ccc528785" name="a77482d4930cb4f700856c02ccc528785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77482d4930cb4f700856c02ccc528785">&#9670;&#160;</a></span>log_to_nvs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Settings::log_to_nvs </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>key</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>log</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1a20fe3938eafa97da459177007ab050" name="a1a20fe3938eafa97da459177007ab050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a20fe3938eafa97da459177007ab050">&#9670;&#160;</a></span>print_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Settings::print_file </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a00dcb4d9f9a4f7deaee375a545947752" name="a00dcb4d9f9a4f7deaee375a545947752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00dcb4d9f9a4f7deaee375a545947752">&#9670;&#160;</a></span>save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Settings::save </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>force</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serialise the cConfig struct into JSON and save to the user flash FS Only check for save every 5 mins, and then only save if the data has changed. </p>
<p>We only want to save data when it's changed because we dont want to wear out the Flash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">force</td><td>for the save regardless of time, but again, only if the data has changed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true </dd>
<dd>
false </dd></dl>

</div>
</div>
<a id="afe820637e10449ff29f61ab90f59cc2f" name="afe820637e10449ff29f61ab90f59cc2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe820637e10449ff29f61ab90f59cc2f">&#9670;&#160;</a></span>update_wifi_credentials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Settings::update_wifi_credentials </td>
          <td>(</td>
          <td class="paramtype">String</td>          <td class="paramname"><span class="paramname"><em>ssid</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String</td>          <td class="paramname"><span class="paramname"><em>pass</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the users WiFi credentials in the settings struct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ssid</td><td></td></tr>
    <tr><td class="paramname">pass</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6b7deab2e703293098334c3bbc60537e" name="a6b7deab2e703293098334c3bbc60537e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b7deab2e703293098334c3bbc60537e">&#9670;&#160;</a></span>backup_prefix</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const char* Settings::backup_prefix = &quot;settings_back_&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4ca1d960902db935f5a7ec3db599b53c" name="a4ca1d960902db935f5a7ec3db599b53c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca1d960902db935f5a7ec3db599b53c">&#9670;&#160;</a></span>config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_config.html">Config</a> Settings::config</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adb8b7aff516eea8ae61ea171321ec857" name="adb8b7aff516eea8ae61ea171321ec857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb8b7aff516eea8ae61ea171321ec857">&#9670;&#160;</a></span>filename</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const char* Settings::filename = &quot;/settings.json&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a142b93e70d4701aec73d790d0636003c" name="a142b93e70d4701aec73d790d0636003c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a142b93e70d4701aec73d790d0636003c">&#9670;&#160;</a></span>last_save_time</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long Settings::last_save_time = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a02350e39c1cb382d74b6e2ae869b5e85" name="a02350e39c1cb382d74b6e2ae869b5e85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02350e39c1cb382d74b6e2ae869b5e85">&#9670;&#160;</a></span>log</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const char* Settings::log = &quot;/log.txt&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af893529f9727266e69ab3dd11de07eed" name="af893529f9727266e69ab3dd11de07eed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af893529f9727266e69ab3dd11de07eed">&#9670;&#160;</a></span>max_backups</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int Settings::max_backups = 10</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae9cfa0afc12575661b57f107fca803e6" name="ae9cfa0afc12575661b57f107fca803e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9cfa0afc12575661b57f107fca803e6">&#9670;&#160;</a></span>max_time_between_saves</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long Settings::max_time_between_saves = 60000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab1656c5e0b8259976be7cfd2d720459d" name="ab1656c5e0b8259976be7cfd2d720459d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1656c5e0b8259976be7cfd2d720459d">&#9670;&#160;</a></span>nvs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Preferences Settings::nvs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b75bfb359b1533477accd5e65601f60" name="a7b75bfb359b1533477accd5e65601f60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b75bfb359b1533477accd5e65601f60">&#9670;&#160;</a></span>setting_audio_alarm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a> Settings::setting_audio_alarm {&amp;config.audio_alarm}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a07f3193633d813269b3495255dc63125" name="a07f3193633d813269b3495255dc63125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07f3193633d813269b3495255dc63125">&#9670;&#160;</a></span>setting_audio_ui</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a> Settings::setting_audio_ui {&amp;config.audio_ui}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1207215c27f2d0beb3b23115e0001463" name="a1207215c27f2d0beb3b23115e0001463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1207215c27f2d0beb3b23115e0001463">&#9670;&#160;</a></span>setting_flipped</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a> Settings::setting_flipped {&amp;config.flipped}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae7292aa2bf29892b83474e794f4d8764" name="ae7292aa2bf29892b83474e794f4d8764"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7292aa2bf29892b83474e794f4d8764">&#9670;&#160;</a></span>setting_left_handed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a> Settings::setting_left_handed {&amp;config.left_handed}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa42da92c05be487651de3a57ba3a53b0" name="aa42da92c05be487651de3a57ba3a53b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa42da92c05be487651de3a57ba3a53b0">&#9670;&#160;</a></span>setting_time_24hour</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a> Settings::setting_time_24hour {&amp;config.time_24hour}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab8a0fdb8c98a2f7738995106b522f17d" name="ab8a0fdb8c98a2f7738995106b522f17d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8a0fdb8c98a2f7738995106b522f17d">&#9670;&#160;</a></span>setting_time_dateformat</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a> Settings::setting_time_dateformat {&amp;config.time_dateformat}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a509f772f09ffc6fff7979da55a31a39e" name="a509f772f09ffc6fff7979da55a31a39e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a509f772f09ffc6fff7979da55a31a39e">&#9670;&#160;</a></span>setting_wifi_start</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_settings_option_bool.html">SettingsOptionBool</a> Settings::setting_wifi_start {&amp;config.wifi_start}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a11318b2647ea7d36db2185fc652c2c8a" name="a11318b2647ea7d36db2185fc652c2c8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11318b2647ea7d36db2185fc652c2c8a">&#9670;&#160;</a></span>tmp_filename</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const char* Settings::tmp_filename = &quot;/tmp_settings.json&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/settings/<a class="el" href="settings_8h.html">settings.h</a></li>
<li>src/settings/<a class="el" href="settings_8cpp.html">settings.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_settings.html">Settings</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
